#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  ğŸ—ï¸   CONFLUX DATA LAB PRE-COMMIT HOOK       â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

start_time=$(date +%s)

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ñ„Ğ»Ğ°Ğ³ --verbose, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ´Ğ°Ğ¶Ğµ Ğ¿Ñ€Ğ¸ ÑƒÑĞ¿ĞµÑ…Ğµ
if npx lint-staged --verbose; then
  end_time=$(date +%s)
  duration=$((end_time - start_time))
  
  echo ""
  echo "âœ…  Success! Commit accepted."
  echo "â±ï¸   Time taken: ${duration}s"
  echo ""
  exit 0
else
  echo ""
  echo "âŒ  Checks failed. Commit rejected."
  echo ""
  exit 1
fi