#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# 1. Генерируем актуальную структуру
# Если скрипт упадет с ошибкой, коммит прервется (это правильно)
npm run update-structure

# 2. ВАЖНО: Добавляем обновленный файл в индекс
# Без этого шага файл обновится на диске, но в коммит попадет старая версия!
git add STRUCTURE.md

# 3. Запускаем проверки кода (lint-staged)
npx lint-staged