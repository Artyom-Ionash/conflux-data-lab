# Архитектура проекта Conflux Data Lab

## Обзор

Проект структурирован как портфолио инструментов для обработки данных с использованием Next.js App Router. Архитектура спроектирована для легкого добавления новых инструментов и масштабирования.

Общий обзор, категории инструментов и команды запуска см. в `README.md`. Детальное дерево директорий — в `STRUCTURE.md`.

## Структура директорий

### `/app` - Приложение Next.js

#### `/app/components`
Переиспользуемые React компоненты, разделенные по назначению:

- **`layout/`** - Компоненты макета (Header, Footer)
- **`tools/`** - Компоненты, связанные с инструментами
  - `ToolCard.tsx` - Карточка инструмента для списка
  - `ToolGrid.tsx` - Сетка инструментов
  - `[tool-id]/` - Компоненты конкретных инструментов
- **`ui/`** - Базовые UI компоненты (Card, Badge и т.д.)

#### `/app/tools`
Динамические маршруты для инструментов:

- `[category]/page.tsx` - Страница категории инструментов
- `[category]/[toolId]/page.tsx` - Страница конкретного инструмента

#### `/app/page.tsx`
Главная страница с каталогом всех инструментов, разделенных по категориям.

### `/lib` - Библиотека и утилиты

#### `/lib/config`
Конфигурационные файлы:
- `tools.ts` - Централизованная конфигурация всех инструментов

#### `/lib/types`
TypeScript типы и интерфейсы:
- `tools.ts` - Типы для системы инструментов

#### `/lib/utils`
Утилитарные функции:
- `tool-loader.tsx` - Динамическая загрузка компонентов инструментов

## Принципы архитектуры

### 1. Модульность
Каждый инструмент - это независимый компонент, который можно легко добавить или удалить.

### 2. Типобезопасность
Все инструменты типизированы через TypeScript интерфейсы.

### 3. Масштабируемость
Новые инструменты добавляются через:
1. Конфигурацию в `lib/config/tools.ts`
2. Создание компонента в `app/components/tools/[tool-id]/`
3. Регистрацию в `lib/utils/tool-loader.tsx`

### 4. Переиспользование
Общие компоненты (Card, Badge, ToolCard) используются во всем приложении.

## Категории инструментов

Система поддерживает следующие категории:

- **conversion** - Конвертация между форматами (JSON ↔ CSV, XML ↔ JSON)
- **transformation** - Трансформация структуры данных
- **analysis** - Анализ и статистика данных
- **validation** - Валидация данных
- **formatting** - Форматирование и красота вывода

## Поток данных

```
Конфигурация (lib/config/tools.ts)
    ↓
Страницы (app/tools/[category]/[toolId]/page.tsx)
    ↓
Загрузчик компонентов (lib/utils/tool-loader.tsx)
    ↓
Компонент инструмента (app/components/tools/[tool-id]/)
```

## Добавление нового инструмента

### Шаг 1: Конфигурация
Добавьте инструмент в `lib/config/tools.ts`:

```typescript
{
  id: 'new-tool',
  name: 'New Tool',
  description: 'Описание',
  category: 'conversion',
  tags: ['tag1', 'tag2'],
  featured: false, // опционально
}
```

### Шаг 2: Компонент
Создайте компонент в `app/components/tools/new-tool/NewTool.tsx`:

```typescript
'use client';

export function NewTool() {
  // Логика инструмента
  return <div>...</div>;
}
```

### Шаг 3: Регистрация
Зарегистрируйте в `lib/utils/tool-loader.tsx`:

```typescript
import { NewTool } from '@/app/components/tools/new-tool/NewTool';

const toolComponents: Record<string, React.ComponentType> = {
  'new-tool': NewTool,
  // ...
};
```

Готово! Инструмент автоматически появится на главной странице и будет доступен по адресу `/tools/conversion/new-tool`.

## Стилизация

Проект использует Tailwind CSS с темной темой. Все компоненты поддерживают dark mode через классы `dark:`.

## Рекомендации

1. **Компоненты инструментов** должны быть клиентскими (`'use client'`)
2. **Страницы** остаются серверными компонентами для лучшей производительности
3. **Валидация** входных данных должна быть на клиенте и сервере
4. **Обработка ошибок** должна быть понятной для пользователя
5. **Примеры использования** должны быть включены в каждый инструмент


