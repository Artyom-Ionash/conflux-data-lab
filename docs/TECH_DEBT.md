# üìâ Technical Debt & Roadmap

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã –∏ –ø–ª–∞–Ω—ã –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞.

## üî¥ –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (Architecture)

### 1. –í—ã–¥–µ–ª–µ–Ω–∏–µ –î–æ–º–µ–Ω–Ω—ã—Ö –ü—Ä–∏–º–∏—Ç–∏–≤–æ–≤

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å Canvas –∏ Video –≤–æ –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö.

- –í—ã–¥–µ–ª–∏—Ç—å `lib/modules/viewport` (–∑—É–º, –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã).
- –í—ã–¥–µ–ª–∏—Ç—å `lib/modules/playback` (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º –≤–∏–¥–µ–æ, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è).

## üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (Reliability & DX)

### 1. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ State Machines

–°–ª–æ–∂–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `VideoFrameExtractor`) —É–ø—Ä–∞–≤–ª—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —á–µ—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤ (`isProcessing`, `currentStep`, `error`). –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç —Ä–∏—Å–∫ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è "–Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π" (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –∏ –∑–∞–≥—Ä—É–∑–∫–∞).

- **–ü–ª–∞–Ω:** –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ö—É–∫–æ–≤ (`use-frame-extractor.ts`) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Finite State Machine (FSM) –∏–ª–∏ `useReducer`.
- **–¶–µ–ª—å:** –°–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ (`idle` ‚Üí `extracting` ‚Üí `generating`) —è–≤–Ω—ã–º–∏ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏.

### 2. Web Worker Optimization

–•–æ—Ç—è `useWorker` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ GIF –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤—Å—ë –µ—â—ë –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å Main Thread.

- **Status (20-12-2025):** –õ–æ–≥–∏–∫–∞ `gifshot` –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤ `lib/modules/video/gif-encoder.ts`, –Ω–æ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ.
- **–ü–ª–∞–Ω:** –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ `gif-encoder.ts` –≤–Ω—É—Ç—Ä—å Web Worker, –∏—Å–ø–æ–ª—å–∑—É—è `comlink` –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ö—É–∫ `useWorker`.

### 3. –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è `ProjectToContext` (Refining Phase)

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ProjectToContext.tsx` (~18KB) –¥–æ—Å—Ç–∏–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –º–∞—Å—Å—ã –¥–ª—è "–ú–æ–Ω–æ–ª–∏—Ç–∞". –õ–æ–≥–∏–∫–∞ –æ–±—Ö–æ–¥–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã, –ø–∞—Ä—Å–∏–Ω–≥–∞ `.gitignore` –∏ —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–º–µ—à–∞–Ω–∞ —Å Presentation Layer.

- **–†–∏—Å–∫:** –£—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.
- **–ü–ª–∞–Ω:** –í—ã–¥–µ–ª–∏—Ç—å –ª–æ–≥–∏–∫—É –≤ —Ö—É–∫ `useProjectScanner` (–∏–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ `lib/modules/context-generator`), –æ—Å—Ç–∞–≤–∏–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É —Ç–æ–ª—å–∫–æ —Ä–æ–ª—å View.

## üü¢ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

### 1. Strict TS vs Next.js Conflict

–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ `.next/types` –∏–∑-–∑–∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏ (`noUncheckedIndexedAccess`). –†–µ—à–µ–Ω–∏–µ –æ—Ç–ª–æ–∂–µ–Ω–æ –¥–æ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –≤ Next.js App Router.

### 2. Godot Parser Fragility

–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `lib/modules/file-system/godot-scene.ts` –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å—Ç—Ä–æ–∫–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–æ—Ä–º–∞—Ç–∞ `.tscn`.

- **–†–∏—Å–∫:** –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Godot 4.x –º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å –ø–∞—Ä—Å–µ—Ä.
- **–†–µ—à–µ–Ω–∏–µ:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏. –ü—Ä–∏ —É—Å–ª–æ–∂–Ω–µ–Ω–∏–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞–π–∑–µ—Ä–∞.

### 3. Canvas Logic Separation

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Canvas.tsx` —Å–µ–π—á–∞—Å –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏: —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π (Matrix math), –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –º—ã—à–∏ –∏ —Ç–µ–º–∏–∑–∞—Ü–∏—è.

- **–ü–ª–∞–Ω:** –í—ã–¥–µ–ª–∏—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏–∫—É –∑—É–º–∞ –∏ –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —á–∏—Å—Ç—ã–π —Ö—É–∫ `useViewportLogic` –∏–ª–∏ –∫–ª–∞—Å—Å, —á—Ç–æ–±—ã –æ–±–ª–µ–≥—á–∏—Ç—å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ Touch-–∂–µ—Å—Ç–æ–≤ –≤ –±—É–¥—É—â–µ–º.
